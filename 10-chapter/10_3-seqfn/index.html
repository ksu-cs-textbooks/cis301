<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Sequences in Scala are passed to functions by reference. This means that if a function makes changes to a sequence parameter, then it will also change whatever sequence object was passed to the function. For example, the test code below passes nums, which has the value ZS(1,2,3), to the makeFirstZero function. The makeFirstZero function changes the first position in its parameter (seq) to be 0, which means that the nums sequence in the test code will also have its first position set to 0 (making it have the value ZS(0,2,3))."><meta name=author content="Julie Thornton"><meta name=twitter:card content="summary"><meta name=twitter:title content="Sequences in Functions :: CIS 301 Textbook"><meta name=twitter:description content="Sequences in Scala are passed to functions by reference. This means that if a function makes changes to a sequence parameter, then it will also change whatever sequence object was passed to the function. For example, the test code below passes nums, which has the value ZS(1,2,3), to the makeFirstZero function. The makeFirstZero function changes the first position in its parameter (seq) to be 0, which means that the nums sequence in the test code will also have its first position set to 0 (making it have the value ZS(0,2,3))."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis301/10-chapter/10_3-seqfn/"><meta property="og:site_name" content="CIS 301 Textbook"><meta property="og:title" content="Sequences in Functions :: CIS 301 Textbook"><meta property="og:description" content="Sequences in Scala are passed to functions by reference. This means that if a function makes changes to a sequence parameter, then it will also change whatever sequence object was passed to the function. For example, the test code below passes nums, which has the value ZS(1,2,3), to the makeFirstZero function. The makeFirstZero function changes the first position in its parameter (seq) to be 0, which means that the nums sequence in the test code will also have its first position set to 0 (making it have the value ZS(0,2,3))."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Sequences, Globals, and Termination"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-05-01T11:30:38-05:00"><meta itemprop=name content="Sequences in Functions :: CIS 301 Textbook"><meta itemprop=description content="Sequences in Scala are passed to functions by reference. This means that if a function makes changes to a sequence parameter, then it will also change whatever sequence object was passed to the function. For example, the test code below passes nums, which has the value ZS(1,2,3), to the makeFirstZero function. The makeFirstZero function changes the first position in its parameter (seq) to be 0, which means that the nums sequence in the test code will also have its first position set to 0 (making it have the value ZS(0,2,3))."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-05-01T11:30:38-05:00"><meta itemprop=wordCount content="1609"><title>Sequences in Functions :: CIS 301 Textbook</title>
<link href=/cis301/10-chapter/10_3-seqfn/index.xml rel=alternate type=application/rss+xml title="Sequences in Functions :: CIS 301 Textbook"><link href=/cis301/10-chapter/10_3-seqfn/index.print.html rel=alternate type=text/html title="Sequences in Functions :: CIS 301 Textbook"><link href=/cis301/10-chapter/10_3-seqfn/tele.html rel=alternate type=text/html title="Sequences in Functions :: CIS 301 Textbook"><link href=/cis301/10-chapter/10_3-seqfn/embed.html rel=alternate type=text/html title="Sequences in Functions :: CIS 301 Textbook"><link href=/cis301/css/fontawesome-all.min.css?1736885511 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis301/css/fontawesome-all.min.css?1736885511 rel=stylesheet></noscript><link href=/cis301/css/nucleus.css?1736885511 rel=stylesheet><link href=/cis301/css/auto-complete.css?1736885511 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis301/css/auto-complete.css?1736885511 rel=stylesheet></noscript><link href=/cis301/css/perfect-scrollbar.min.css?1736885511 rel=stylesheet><link href=/cis301/css/fonts.css?1736885511 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis301/css/fonts.css?1736885511 rel=stylesheet></noscript><link href=/cis301/css/theme.css?1736885511 rel=stylesheet><link href=/cis301/css/theme-auto.css?1736885511 rel=stylesheet id=R-variant-style><link href=/cis301/css/chroma-auto.css?1736885511 rel=stylesheet id=R-variant-chroma-style><link href=/cis301/css/variant.css?1736885511 rel=stylesheet><link href=/cis301/css/print.css?1736885511 rel=stylesheet media=print><script src=/cis301/js/variant.js?1736885511></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis301",window.index_js_url="/cis301/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis301/css/custom.css?1736885511 rel=stylesheet></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=/cis301/10-chapter/10_3-seqfn/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#preconditions-with-sequences>Preconditions with sequences</a></li><li><a href=#function-modifies-clause>Function <code>Modifies</code> clause</a></li><li><a href=#postconditions-with-sequences>Postconditions with sequences</a><ul><li><a href=#relating-return-values-to-sequence-elements>Relating return values to sequence elements</a></li><li><a href=#describing-how-the-function-changes-the-sequence>Describing how the function changes the sequence</a></li></ul></li><li><a href=#example-finished-makefirstzero-verification>Example: finished <code>makeFirstZero</code> verification</a></li><li><a href=#example-swap-program>Example: swap program</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis301/10-chapter/><span itemprop=name>Sequences, Globals, and Termination</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Sequences in Functions</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/ksu-cs-textbooks/cis301/edit/main/content/10-chapter/10_3-seqFn.md target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis301/10-chapter/10_3-seqfn/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis301/10-chapter/10_2-intosequences/ title="Intro to Sequences (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis301/10-chapter/10_4-seqloop/ title="Sequences in Loops (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more><div class="topbar-button topbar-button-embed" data-content-empty=disable data-width-s=area-more data-width-m=area-more data-width-l=area-more><a class=topbar-control href=/cis301/10-chapter/10_3-seqfn/embed.html title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a></div><div class="topbar-button topbar-button-tele" data-content-empty=disable data-width-s=area-more data-width-m=area-more data-width-l=area-more><a class=topbar-control href=/cis301/10-chapter/10_3-seqfn/tele.html title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a></div></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=sequences-in-functions>Sequences in Functions</h1><p>Sequences in Scala are passed to functions by reference. This means that if a function makes changes to a sequence parameter, then it will also change whatever sequence object was passed to the function. For example, the test code below passes <code>nums</code>, which has the value <code>ZS(1,2,3)</code>, to the <code>makeFirstZero</code> function. The <code>makeFirstZero</code> function changes the first position in its parameter (<code>seq</code>) to be 0, which means that the <code>nums</code> sequence in the test code will also have its first position set to 0 (making it have the value <code>ZS(0,2,3)</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>// #Sireum #Logika
</span></span><span class=line><span class=cl>//@Logika: --background save
</span></span><span class=line><span class=cl>import org.sireum._
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>def makeFirstZero(seq: ZS): Unit = {  // Unit is like void in Java and C#
</span></span><span class=line><span class=cl>    seq(0) = 0
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>///////////// Test code /////////////////
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>var nums: ZS = ZS(1,2,3)
</span></span><span class=line><span class=cl>makeFirstZero(nums)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>assert(nums == ZS(0,2,3))</span></span></code></pre></div><h2 id=preconditions-with-sequences>Preconditions with sequences</h2><p>When writing the precondition for a function that takes a sequence parameter, we must consider whether our function will only work correctly for particular sequence values or sizes. For example, our <code>makeFirstZero</code> function will not work if the size of the <code>seq</code> parameter is zero. We would need to add this requirement to the function&rsquo;s precondition (to its <code>Requires</code> clause):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>seq.size &gt; 0</span></span></code></pre></div><p>If we wanted to require that all values in a sequence parameter (say, <code>nums</code>) be between 10 and 20, we would add the following to the precondition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>∀ (0 until nums.size)(x =&gt; (nums(x) &gt;= 10 ∧ nums(x) &lt;= 20))</span></span></code></pre></div><p>Sometimes, functions with sequence parameters will work for any size/values &ndash; in those cases, we don&rsquo;t need to list anything about the sequence in the precondition.</p><h2 id=function-modifies-clause>Function <code>Modifies</code> clause</h2><p>We learned in chapter 9 that the format of a function contract is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Contract(
</span></span><span class=line><span class=cl>    Requires (  preconditions   ),
</span></span><span class=line><span class=cl>    Ensures (   postconditions  )
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><p>However, there is actually a third portion of the function contract that we have ommitted until this point &ndash; the <code>Modifies</code> clause. This clause is required whenever a function changes the values in a sequence parameter or changes global variables. For example, the <code>makeFirstZero</code> function DOES change its sequence parameter, <code>seq</code>, as it sets its first position to 0. <code>makeFirstZero</code> should therefore include this <code>Modifies</code> clause:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Modifies ( seq ),</span></span></code></pre></div><p>This clause goes between the precondition (<code>Requires</code>) and the postcondition (<code>Ensures</code>), making the new template for the function contract look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Contract(
</span></span><span class=line><span class=cl>    Requires (  preconditions   ),
</span></span><span class=line><span class=cl>    Modifies (  comma-separated list of sequences/global variables modified by the function ),
</span></span><span class=line><span class=cl>    Ensures (   postconditions  )
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><p>If the function modifies more than one sequence or global variable, they are listed together in a comma-separated list in the <code>Modifies</code> clause.</p><h2 id=postconditions-with-sequences>Postconditions with sequences</h2><p>When writing the postcondition for a function that uses a sequence parameter, we must consider two things:</p><ul><li>How the return value relates to the sequence</li><li>How the function will change the sequence</li></ul><h3 id=relating-return-values-to-sequence-elements>Relating return values to sequence elements</h3><p>We will still use the <code>Res[Type]</code> keyword for describing the function&rsquo;s return value in the postcondition. For example, if a function was returning the smallest value in the integer sequence <code>nums</code>, we would say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ensures(
</span></span><span class=line><span class=cl>    ∀ (0 until nums.size)(x =&gt; (Res[Z] &lt;= nums(x))),
</span></span><span class=line><span class=cl>    ∃ (0 until nums.size)(x =&gt; (Res[Z] == nums(x)))
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><p>Here, the first postcondition states that our return value will be less than or equal to every value in the sequence, and the second postcondition states that our return value is one of the sequence elements. (The second postcondition prevents us from sneakily returning some negative number and claiming that it was the smallest element in the sequence, when in fact it wasn&rsquo;t one of the sequence elements.)</p><p>Sometimes, our postconditions will promise to return a particular value if some claim about the sequence is true. Suppose we have a function that returns whether or not (i.e., a boolean) all elements in the sequence <code>a</code> are negative. Our postcondition would be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ensures(
</span></span><span class=line><span class=cl>    ( ∀ (0 until a.size)(x =&gt; (a(x) &lt; 0)) ) → (result == true),
</span></span><span class=line><span class=cl>    ( ∃ (0 until a.size)(x =&gt; (a(x) &gt;= 0)) ) → (result == false),
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><p>Here, the first postcondition promises that if all sequence elements are negative, then the function will return true. The second postcondition promises the opposite &ndash; that if there is a nonnegative sequence element, then the function will return false.</p><h3 id=describing-how-the-function-changes-the-sequence>Describing how the function changes the sequence</h3><p>Consider again the <code>makeFirstZero</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>def makeFirstZero(seq: ZS): Unit = {
</span></span><span class=line><span class=cl>    seq(0) = 0
</span></span><span class=line><span class=cl>}</span></span></code></pre></div><p>This function doesn&rsquo;t return anything (hence the <code>Unit</code> return type), but we do need to describe what impact calling this function will have on the sequence. We can partially accomplish our goal with this postcondition (in our <code>Ensures</code> clause):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>seq(0) == 0</span></span></code></pre></div><p>Which promises that after the function ends, the first value in the sequence will be 0. However, suppose we wrote this instead for the <code>makeFirstZero</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>def makeFirstZero(seq: ZS): Unit = {
</span></span><span class=line><span class=cl>    seq(0) = 0
</span></span><span class=line><span class=cl>    seq(1) = 100
</span></span><span class=line><span class=cl>}</span></span></code></pre></div><p>This version of the function DOES satisfy the postcondition &ndash; the first element is indeed set to 0 &ndash; but it changes other elements, too. The postcondition should be descriptive enough that anyone calling it can be certain EXACTLY what every single value in the sequence will be afterwards. Our postcondition needs to describe exactly what values in the sequence WILL change and exactly what values WON&rsquo;T change.</p><p>This means that our <code>makeFirstZero</code> function needs to state that the first element in <code>seq</code> gets set to 0, and that every other value in the sequence <em>stays the same as its original value</em>. To help us describe the <em>original value</em> of a sequence, we can use the special <code>In(sequenceName)</code> syntax, which holds the value of a sequence parameter <code>sequenceName</code> at the time the function was called. (This <code>In</code> syntax can only be used in logic blocks, not in the code.)</p><p>We can specify exactly what happens to each sequence element in our first version of <code>makeFirstZero</code> like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ensures(
</span></span><span class=line><span class=cl>    seq(0) == 0,
</span></span><span class=line><span class=cl>    ∀ (1 until seq.size)(x =&gt; ( seq(x) == In(seq)(x)))
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><p>The second postcondition says: &ldquo;All elements from position 1 on keep their original values&rdquo;.</p><h2 id=example-finished-makefirstzero-verification>Example: finished <code>makeFirstZero</code> verification</h2><p>Now that we have seen all the pieces of writing function contracts for functions that work with sequences, we can put together the full function contract for our <code>makeFirstZero</code> function. The assert statement in the test code will be verified by Logika&rsquo;s auto mode:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>// #Sireum #Logika
</span></span><span class=line><span class=cl>//@Logika: --background save
</span></span><span class=line><span class=cl>import org.sireum._
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>def makeFirstZero(seq: ZS): Unit = {
</span></span><span class=line><span class=cl>    Contract(
</span></span><span class=line><span class=cl>        Requires(  seq.size &gt; 0  ),
</span></span><span class=line><span class=cl>        Modifies(  seq  ), 
</span></span><span class=line><span class=cl>        Ensures(
</span></span><span class=line><span class=cl>        seq(0) == 0,
</span></span><span class=line><span class=cl>        ∀ (1 until seq.size)(x =&gt; ( seq(x) == In(seq)(x)))
</span></span><span class=line><span class=cl>        )
</span></span><span class=line><span class=cl>    )
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    seq(0) = 0
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//////////////// Test code //////////////
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>var nums: ZS = ZS(1,2,3)
</span></span><span class=line><span class=cl>makeFirstZero(nums)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>assert(nums == ZS(0,2,3))</span></span></code></pre></div><h2 id=example-swap-program>Example: swap program</h2><p>Suppose we have the following swap program:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>// #Sireum #Logika
</span></span><span class=line><span class=cl>//@Logika: --background save
</span></span><span class=line><span class=cl>import org.sireum._
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>def swap(list: ZS, pos1: Z, pos2: Z): Unit = {
</span></span><span class=line><span class=cl>    val temp: Z = list(pos1)
</span></span><span class=line><span class=cl>    list(pos1) = list(pos2)
</span></span><span class=line><span class=cl>    list(pos2) = temp
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>///////////// Test code ///////////////////
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>var testList: ZS = ZS(1,2,3,4)
</span></span><span class=line><span class=cl>swap(testList,0,3)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//the values in positions 0 and 3 should be swapped
</span></span><span class=line><span class=cl>//all other elements should be the same
</span></span><span class=line><span class=cl>assert(testList == ZS(4,2,3,1))</span></span></code></pre></div><p>Here, <code>swap</code> takes an integer sequence (<code>list</code>) and two positions (<code>pos1</code> and <code>pos2</code>). It uses a temp variable to swap the values in <code>list</code> at <code>pos1</code> and <code>pos2</code>. We would like to write an appropriate function contract so the assert statement in the test code holds.</p><p>We must first consider the precondition &ndash; does <code>swap</code> have any requirements about its parameters? Since <code>swap</code> uses <code>pos1</code> and <code>pos2</code> as positions within <code>list</code>, we can see that <code>swap</code> will crash if either position is out of bounds &ndash; either negative or past the end of the sequence.</p><p>The function is changing the sequence, so we will need a <code>Modifies</code> clause. Finally, we must consider the postcondition. This function isn&rsquo;t returning a value, but it is changing the sequence &ndash; so we should describe exactly what values HAVE changed (and their new values) and what values have NOT changed. We want to say that:</p><ul><li><code>list(pos1)</code> has the value that was originally at <code>list(pos2)</code> (i.e, the value at <code>In(list)(pos2)</code>)</li><li><code>list(pos2)</code> has the value that was originally at <code>list(pos1)</code> (i.e, the value at <code>In(list)(pos1)</code>)</li><li>All other positions are unchanged (i.e., they are the same as they were in <code>In(list)</code>)</li><li>The size doesn&rsquo;t change (which we must always list if a sequence is modified)</li></ul><p>We can now complete the function contract for <code>swap</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>// #Sireum #Logika
</span></span><span class=line><span class=cl>//@Logika: --background save
</span></span><span class=line><span class=cl>import org.sireum._
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>def swap(list: ZS, pos1: Z, pos2: Z): Unit = {
</span></span><span class=line><span class=cl>    Contract(
</span></span><span class=line><span class=cl>        Requires(
</span></span><span class=line><span class=cl>            0 &lt;= pos1 &amp; pos1 &lt; list.size, // pos1 is a valid index
</span></span><span class=line><span class=cl>            0 &lt;= pos2 &amp; pos2 &lt; list.size  // pos2 is a valid index
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>        Modifies(list),           // documents list is modified
</span></span><span class=line><span class=cl>        Ensures(
</span></span><span class=line><span class=cl>            list(pos1) == In(list)(pos2),
</span></span><span class=line><span class=cl>            list(pos2) == In(list)(pos1),
</span></span><span class=line><span class=cl>            list.size == In(list).size,
</span></span><span class=line><span class=cl>            ∀ (0 until list.size)(x =&gt; (x != pos1 &amp; x != pos2 → list(x) == In(list)(x)))
</span></span><span class=line><span class=cl>        )
</span></span><span class=line><span class=cl>  )
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  val temp: Z = list(pos1)
</span></span><span class=line><span class=cl>  list(pos1) = list(pos2)
</span></span><span class=line><span class=cl>  list(pos2) = temp
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//////////////// Test code //////////////
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>var testList: ZS = ZS(1,2,3,4)
</span></span><span class=line><span class=cl>swap(testList,0,3)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>assert(testList == ZS(4,2,3,1))</span></span></code></pre></div><p>If we test this program in Logika&rsquo;s symexe mode, the final assert will hold &ndash; we have enough information to make a claim about EXACTLY what the sequence will look like after calling <code>swap</code>.</p><p>Note that we could have simplified the postcondition by using the <em>sequence update notation</em> described at the end of section 10.2. We want to say that the value of <code>list</code> at the end of the function is equivalent to the value of list at the beginning of the function (<code>In(list)</code>) with the following exceptions:</p><ul><li>The new value at <code>pos1</code> should be the original value at <code>pos2</code> (<code>In(list)(pos2)</code>)</li><li>The new value at <code>pos2</code> should be the original value at <code>pos1</code> (<code>In(list)(pos1)</code>)</li></ul><p>Here is the equivalent (but shorter) postcondition for <code>swap</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ensures(
</span></span><span class=line><span class=cl>    list ≡ In(list)(pos1 ~&gt; In(list)(pos2), pos2 ~&gt; In(list)(pos1))
</span></span><span class=line><span class=cl>)</span></span></code></pre></div><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Julie Thornton
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis301/commit/3079422be79d28798e2a5f70de69e6e838a1c5be>May 1, 2024</a></p></div></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=/cis301/>CIS 301: Logical Foundations of Programming</a></div><search><form action=/cis301/search.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/cis301/js/auto-complete.js?1736885511 defer></script><script src=/cis301/js/lunr/lunr.min.js?1736885511 defer></script><script src=/cis301/js/lunr/lunr.stemmer.support.min.js?1736885511 defer></script><script src=/cis301/js/lunr/lunr.multi.min.js?1736885511 defer></script><script src=/cis301/js/lunr/lunr.en.min.js?1736885511 defer></script><script src=/cis301/js/search.js?1736885511 defer></script></div><div id=R-homelinks class=default-animation><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/cis301/0-chapter/><input type=checkbox id=R-section-4dd9ea2241609372e21522ad467bdbcf aria-controls=R-subsections-4dd9ea2241609372e21522ad467bdbcf><label for=R-section-4dd9ea2241609372e21522ad467bdbcf><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Getting Started</span></label><a class=padding href=/cis301/0-chapter/><b>0. </b>Getting Started</a><ul id=R-subsections-4dd9ea2241609372e21522ad467bdbcf class="morespace collapsible-menu"><li data-nav-id=/cis301/0-chapter/0_1-toolsguide/><a class=padding href=/cis301/0-chapter/0_1-toolsguide/>0.1. Tools Guide</a></li></ul></li><li data-nav-id=/cis301/1-chapter/><input type=checkbox id=R-section-17929730d34290b059d2edff1c690239 aria-controls=R-subsections-17929730d34290b059d2edff1c690239><label for=R-section-17929730d34290b059d2edff1c690239><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Basics and Logic Puzzles</span></label><a class=padding href=/cis301/1-chapter/><b>1. </b>Basics and Logic Puzzles</a><ul id=R-subsections-17929730d34290b059d2edff1c690239 class="morespace collapsible-menu"><li data-nav-id=/cis301/1-chapter/1_1-logicbasics/><a class=padding href=/cis301/1-chapter/1_1-logicbasics/>1.1. Basic Logical Reasoning</a></li><li data-nav-id=/cis301/1-chapter/1_2-knightsknaves/><a class=padding href=/cis301/1-chapter/1_2-knightsknaves/>1.2. Knights and Knaves</a></li><li data-nav-id=/cis301/1-chapter/1_3-otherpuzzles/><a class=padding href=/cis301/1-chapter/1_3-otherpuzzles/>1.3. Other Puzzles</a></li></ul></li><li data-nav-id=/cis301/2-chapter/><input type=checkbox id=R-section-97391a296e58f4aff54bb6b925a2776b aria-controls=R-subsections-97391a296e58f4aff54bb6b925a2776b><label for=R-section-97391a296e58f4aff54bb6b925a2776b><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Truth Tables</span></label><a class=padding href=/cis301/2-chapter/><b>2. </b>Truth Tables</a><ul id=R-subsections-97391a296e58f4aff54bb6b925a2776b class="morespace collapsible-menu"><li data-nav-id=/cis301/2-chapter/2_1-opscircuits/><a class=padding href=/cis301/2-chapter/2_1-opscircuits/>2.1. Operators and Circuits</a></li><li data-nav-id=/cis301/2-chapter/2_2-logikatruth/><a class=padding href=/cis301/2-chapter/2_2-logikatruth/>2.2. Truth Tables in Logika</a></li><li data-nav-id=/cis301/2-chapter/2_3-satis/><a class=padding href=/cis301/2-chapter/2_3-satis/>2.3. Satisfiability</a></li><li data-nav-id=/cis301/2-chapter/2_4-logicalequiv/><a class=padding href=/cis301/2-chapter/2_4-logicalequiv/>2.4. Logical Equivalence</a></li><li data-nav-id=/cis301/2-chapter/2_5-sementail/><a class=padding href=/cis301/2-chapter/2_5-sementail/>2.5. Semantic Entailment</a></li></ul></li><li data-nav-id=/cis301/3-chapter/><input type=checkbox id=R-section-b4e2df8934a6b804e9336da7e38d4126 aria-controls=R-subsections-b4e2df8934a6b804e9336da7e38d4126><label for=R-section-b4e2df8934a6b804e9336da7e38d4126><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Propositional Logic Translations</span></label><a class=padding href=/cis301/3-chapter/><b>3. </b>Propositional Logic Translations</a><ul id=R-subsections-b4e2df8934a6b804e9336da7e38d4126 class="morespace collapsible-menu"><li data-nav-id=/cis301/3-chapter/3_1-propatom/><a class=padding href=/cis301/3-chapter/3_1-propatom/>3.1. Propositional Atoms</a></li><li data-nav-id=/cis301/3-chapter/3_2-notandor/><a class=padding href=/cis301/3-chapter/3_2-notandor/>3.2. NOT, AND, OR Translations</a></li><li data-nav-id=/cis301/3-chapter/3_3-implies/><a class=padding href=/cis301/3-chapter/3_3-implies/>3.3. Implies Translations</a></li><li data-nav-id=/cis301/3-chapter/3_4-equiv/><a class=padding href=/cis301/3-chapter/3_4-equiv/>3.4. Equivalent Translations</a></li><li data-nav-id=/cis301/3-chapter/3_5-knightsknavestt/><a class=padding href=/cis301/3-chapter/3_5-knightsknavestt/>3.5. Knights and Knaves, revisited</a></li></ul></li><li data-nav-id=/cis301/4-chapter/><input type=checkbox id=R-section-619d3749907cd3e1af90a59cf2fcd6bd aria-controls=R-subsections-619d3749907cd3e1af90a59cf2fcd6bd><label for=R-section-619d3749907cd3e1af90a59cf2fcd6bd><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Propositional Logic Proofs</span></label><a class=padding href=/cis301/4-chapter/><b>4. </b>Propositional Logic Proofs</a><ul id=R-subsections-619d3749907cd3e1af90a59cf2fcd6bd class="morespace collapsible-menu"><li data-nav-id=/cis301/4-chapter/4_1-intro/><a class=padding href=/cis301/4-chapter/4_1-intro/>4.1. Introduction</a></li><li data-nav-id=/cis301/4-chapter/4_2-andrules/><a class=padding href=/cis301/4-chapter/4_2-andrules/>4.2. AND Rules</a></li><li data-nav-id=/cis301/4-chapter/4_3-orrules/><a class=padding href=/cis301/4-chapter/4_3-orrules/>4.3. OR Rules</a></li><li data-nav-id=/cis301/4-chapter/4_4-impliesrules/><a class=padding href=/cis301/4-chapter/4_4-impliesrules/>4.4. Implies Rules</a></li><li data-nav-id=/cis301/4-chapter/4_5-notrules/><a class=padding href=/cis301/4-chapter/4_5-notrules/>4.5. Negation Rules</a></li><li data-nav-id=/cis301/4-chapter/4_6-strategies/><a class=padding href=/cis301/4-chapter/4_6-strategies/>4.6. Summary and Strategies</a></li><li data-nav-id=/cis301/4-chapter/4_7-theorems/><a class=padding href=/cis301/4-chapter/4_7-theorems/>4.7. Theorems</a></li><li data-nav-id=/cis301/4-chapter/4_8-equivalence/><a class=padding href=/cis301/4-chapter/4_8-equivalence/>4.8. Equivalence</a></li><li data-nav-id=/cis301/4-chapter/4_9-soundcomplete/><a class=padding href=/cis301/4-chapter/4_9-soundcomplete/>4.9. Soundness and Completeness</a></li></ul></li><li data-nav-id=/cis301/5-chapter/><input type=checkbox id=R-section-fbe0105598b5fc5de0d6a9a8eea1a2d7 aria-controls=R-subsections-fbe0105598b5fc5de0d6a9a8eea1a2d7><label for=R-section-fbe0105598b5fc5de0d6a9a8eea1a2d7><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Predicate Logic Translations</span></label><a class=padding href=/cis301/5-chapter/><b>5. </b>Predicate Logic Translations</a><ul id=R-subsections-fbe0105598b5fc5de0d6a9a8eea1a2d7 class="morespace collapsible-menu"><li data-nav-id=/cis301/5-chapter/5_1-motivation/><a class=padding href=/cis301/5-chapter/5_1-motivation/>5.1. Motivation</a></li><li data-nav-id=/cis301/5-chapter/5_2-predsyntax/><a class=padding href=/cis301/5-chapter/5_2-predsyntax/>5.2. Syntax</a></li><li data-nav-id=/cis301/5-chapter/5_3-singlequantifier/><a class=padding href=/cis301/5-chapter/5_3-singlequantifier/>5.3. Single Quantifier</a></li><li data-nav-id=/cis301/5-chapter/5_4-multquant/><a class=padding href=/cis301/5-chapter/5_4-multquant/>5.4. Multiple Quantifiers</a></li></ul></li><li data-nav-id=/cis301/6-chapter/><input type=checkbox id=R-section-1afc7d1d7b98dcc397b91690230bcb55 aria-controls=R-subsections-1afc7d1d7b98dcc397b91690230bcb55><label for=R-section-1afc7d1d7b98dcc397b91690230bcb55><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Predicate Logic Proofs</span></label><a class=padding href=/cis301/6-chapter/><b>6. </b>Predicate Logic Proofs</a><ul id=R-subsections-1afc7d1d7b98dcc397b91690230bcb55 class="morespace collapsible-menu"><li data-nav-id=/cis301/6-chapter/6_0-logikasyntax/><a class=padding href=/cis301/6-chapter/6_0-logikasyntax/>6.0. Logika Predicate Logic Proof Syntax</a></li><li data-nav-id=/cis301/6-chapter/6_1-univrules/><a class=padding href=/cis301/6-chapter/6_1-univrules/>6.1. Rules with ∀</a></li><li data-nav-id=/cis301/6-chapter/6_2-existrules/><a class=padding href=/cis301/6-chapter/6_2-existrules/>6.2. Rules with ∃</a></li><li data-nav-id=/cis301/6-chapter/6_3-nested/><a class=padding href=/cis301/6-chapter/6_3-nested/>6.3. Nested Quantifiers</a></li><li data-nav-id=/cis301/6-chapter/6_4-equiv/><a class=padding href=/cis301/6-chapter/6_4-equiv/>6.4. Equivalence</a></li><li data-nav-id=/cis301/6-chapter/6_5-strategies/><a class=padding href=/cis301/6-chapter/6_5-strategies/>6.5. Summary and Strategies</a></li><li data-nav-id=/cis301/6-chapter/6_6-soundcomplete/><a class=padding href=/cis301/6-chapter/6_6-soundcomplete/>6.6. Soundness and Completeness</a></li></ul></li><li data-nav-id=/cis301/7-chapter/><input type=checkbox id=R-section-48461595e2f67d1468fbd78e51714428 aria-controls=R-subsections-48461595e2f67d1468fbd78e51714428><label for=R-section-48461595e2f67d1468fbd78e51714428><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Mathematical Induction</span></label><a class=padding href=/cis301/7-chapter/><b>7. </b>Mathematical Induction</a><ul id=R-subsections-48461595e2f67d1468fbd78e51714428 class="morespace collapsible-menu"><li data-nav-id=/cis301/7-chapter/7_1-process/><a class=padding href=/cis301/7-chapter/7_1-process/>7.1. Induction Process</a></li><li data-nav-id=/cis301/7-chapter/7_2-algebraex/><a class=padding href=/cis301/7-chapter/7_2-algebraex/>7.2. Algebra example</a></li><li data-nav-id=/cis301/7-chapter/7_3-divex/><a class=padding href=/cis301/7-chapter/7_3-divex/>7.3. Divisibility example</a></li><li data-nav-id=/cis301/7-chapter/7_4-setex/><a class=padding href=/cis301/7-chapter/7_4-setex/>7.4. Set example</a></li></ul></li><li data-nav-id=/cis301/8-chapter/><input type=checkbox id=R-section-77afa9c6b199f7330fa5eb8966814b35 aria-controls=R-subsections-77afa9c6b199f7330fa5eb8966814b35><label for=R-section-77afa9c6b199f7330fa5eb8966814b35><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Intro to Programming Logic</span></label><a class=padding href=/cis301/8-chapter/><b>8. </b>Intro to Programming Logic</a><ul id=R-subsections-77afa9c6b199f7330fa5eb8966814b35 class="morespace collapsible-menu"><li data-nav-id=/cis301/8-chapter/8_1-goal/><a class=padding href=/cis301/8-chapter/8_1-goal/>8.1. Programming Logic Goal</a></li><li data-nav-id=/cis301/8-chapter/8_2-logikaprograms/><a class=padding href=/cis301/8-chapter/8_2-logikaprograms/>8.2. Logika Programs</a></li><li data-nav-id=/cis301/8-chapter/8_3-assertassume/><a class=padding href=/cis301/8-chapter/8_3-assertassume/>8.3. Assert and Assume</a></li><li data-nav-id=/cis301/8-chapter/8_4-algebrasubst/><a class=padding href=/cis301/8-chapter/8_4-algebrasubst/>8.4. Algebra and Subst Rules</a></li><li data-nav-id=/cis301/8-chapter/8_5-assignment/><a class=padding href=/cis301/8-chapter/8_5-assignment/>8.5. Assignment Statements</a></li><li data-nav-id=/cis301/8-chapter/8_6-divmod/><a class=padding href=/cis301/8-chapter/8_6-divmod/>8.6. Integer Division and Modulo</a></li><li data-nav-id=/cis301/8-chapter/8_7-conditionals/><a class=padding href=/cis301/8-chapter/8_7-conditionals/>8.7. Conditional Statements</a></li></ul></li><li data-nav-id=/cis301/9-chapter/><input type=checkbox id=R-section-ffb46ad61395302deae4c4fa734e982a aria-controls=R-subsections-ffb46ad61395302deae4c4fa734e982a><label for=R-section-ffb46ad61395302deae4c4fa734e982a><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Functions and Loops</span></label><a class=padding href=/cis301/9-chapter/><b>9. </b>Functions and Loops</a><ul id=R-subsections-ffb46ad61395302deae4c4fa734e982a class="morespace collapsible-menu"><li data-nav-id=/cis301/9-chapter/9_1-functions/><a class=padding href=/cis301/9-chapter/9_1-functions/>9.1. Functions</a></li><li data-nav-id=/cis301/9-chapter/9_2-recursion/><a class=padding href=/cis301/9-chapter/9_2-recursion/>9.2. Recursion</a></li><li data-nav-id=/cis301/9-chapter/9_3-loops/><a class=padding href=/cis301/9-chapter/9_3-loops/>9.3. Loops</a></li><li data-nav-id=/cis301/9-chapter/9_4-logikafacts/><a class=padding href=/cis301/9-chapter/9_4-logikafacts/>9.4. Logika Facts</a></li><li data-nav-id=/cis301/9-chapter/9_5-summary/><a class=padding href=/cis301/9-chapter/9_5-summary/>9.5. Summary</a></li></ul></li><li data-nav-id=/cis301/10-chapter/ class=parent><input type=checkbox id=R-section-9e1e97bcf82568ce724d247ecac0ed85 aria-controls=R-subsections-9e1e97bcf82568ce724d247ecac0ed85 checked><label for=R-section-9e1e97bcf82568ce724d247ecac0ed85><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Sequences, Globals, and Termination</span></label><a class=padding href=/cis301/10-chapter/><b>10. </b>Sequences, Globals, and Termination</a><ul id=R-subsections-9e1e97bcf82568ce724d247ecac0ed85 class="morespace collapsible-menu"><li data-nav-id=/cis301/10-chapter/10_1-modes/><a class=padding href=/cis301/10-chapter/10_1-modes/>10.1 Logika Modes</a></li><li data-nav-id=/cis301/10-chapter/10_2-intosequences/><a class=padding href=/cis301/10-chapter/10_2-intosequences/>10.2 Intro to Sequences</a></li><li data-nav-id=/cis301/10-chapter/10_3-seqfn/ class=active><a class=padding href=/cis301/10-chapter/10_3-seqfn/>10.3 Sequences in Functions</a></li><li data-nav-id=/cis301/10-chapter/10_4-seqloop/><a class=padding href=/cis301/10-chapter/10_4-seqloop/>10.4 Sequences in Loops</a></li><li data-nav-id=/cis301/10-chapter/10_5-globals/><a class=padding href=/cis301/10-chapter/10_5-globals/>10.5 Global Variables</a></li><li data-nav-id=/cis301/10-chapter/10_6-termination/><a class=padding href=/cis301/10-chapter/10_6-termination/>10.6 Termination</a></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/cis301/10-chapter/10_3-seqfn/ lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>KSU Auto</option><option id=R-select-variant-light-theme value=light-theme>KSU Light</option><option id=R-select-variant-dark-theme value=dark-theme>KSU Dark</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built using <a href=http://gohugo.io/>Hugo</a> and <a href=https://github.com/ksu-cs-textbooks/hugo-theme-relearn>Hugo Relearn Theme</a>.</p><p><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt="Creative Commons License" style="border-width:0;margin:.5rem auto" src=https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png></a><br>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</a></p></div></div></div></aside><script src=/cis301/js/clipboard.min.js?1736885511 defer></script><script src=/cis301/js/perfect-scrollbar.min.js?1736885511 defer></script><script src=/cis301/js/theme.js?1736885511 defer></script></body></html>